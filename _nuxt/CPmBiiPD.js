import{Listener as r}from"./_RnK1fCU.js";import{d as s,x as c,y as p}from"#entry";import{_ as d}from"./DlAUqK2U.js";import"./BxOpyrPk.js";const m=s({name:"MainPage",emits:["ready"],components:{},computed:{},created(){},data(){return{map:null}},methods:{async waitForYmaps3(){return new Promise((n,t)=>{let e=0;const i=()=>{typeof window<"u"&&"ymaps3"in window?n(window.ymaps3):e>=1e4?t(new Error("ymaps3 не загрузился за 10 секунд")):(e+=50,setTimeout(i,50))};i()})},async injectYandexMap(){if(window.ymaps3){console.warn("Карта уже загружена!");return}const n=document.createElement("SCRIPT"),t=new URL("https://api-maps.yandex.ru/v3/");t.searchParams.set("lang","ru_RU"),t.searchParams.set("apikey","62c88456-1fdb-474c-8ed3-a45218e508ca");const o={async:"",defer:"",referrerpolicy:"strict-origin-when-cross-origin",type:"text/javascript",src:t.toString()};for(const a in o)o[a]!==!1&&n.setAttribute(a,o[a]);document.head.appendChild(n),await this.waitForYmaps3(),await ymaps3.ready},async initMap(){await this.injectYandexMap();const{YMap:n,YMapDefaultSchemeLayer:t,YMapDefaultFeaturesLayer:o}=ymaps3,a=document.querySelector("#map");if(!a){console.error("Element #map not found");return}const e=new n(a,{location:{center:[74.601572,42.885146],zoom:10},behaviors:["drag","scrollZoom"]});e.addChild(new t({})),e.addChild(new o({})),new r(e).init(),window.gpMapStore.map=this.map=e,this.$emit("ready",e)}},async mounted(){window.gpMapStore||(window.gpMapStore={}),await this.initMap()}}),l={id:"map",style:{position:"absolute",top:"0",left:"0",right:"0",bottom:"0"}};function u(n,t,o,a,e,i){return p(),c("div",l)}const M=d(m,[["render",u]]);export{M as default};
