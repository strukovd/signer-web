import{Listener as r}from"./_RnK1fCU.js";import{d as s,_ as p,x as c,O as d,y as m}from"#entry";import"./BxOpyrPk.js";const l=s({name:"MainPage",emits:["ready"],components:{},computed:{},created(){},data(){return{map:null}},methods:{async waitForYmaps3(){return new Promise((t,e)=>{let a=0;const i=()=>{typeof window<"u"&&"ymaps3"in window?t(window.ymaps3):a>=1e4?e(new Error("ymaps3 не загрузился за 10 секунд")):(a+=50,setTimeout(i,50))};i()})},async injectYandexMap(){if(window.ymaps3){console.warn("Карта уже загружена!");return}const t=document.createElement("SCRIPT"),e=new URL("https://api-maps.yandex.ru/v3/");e.searchParams.set("lang","ru_RU"),e.searchParams.set("apikey","62c88456-1fdb-474c-8ed3-a45218e508ca");const o={async:"",defer:"",referrerpolicy:"strict-origin-when-cross-origin",type:"text/javascript",src:e.toString()};for(const n in o)o[n]!==!1&&t.setAttribute(n,o[n]);document.head.appendChild(t),await this.waitForYmaps3(),await ymaps3.ready},async initMap(){await this.injectYandexMap();const{YMap:t,YMapDefaultSchemeLayer:e,YMapDefaultFeaturesLayer:o}=ymaps3,n=document.getElementById("map");if(!n){console.error("Element #map not found");return}const a=new t(n,{location:{center:[74.601572,42.885146],zoom:10},behaviors:["drag","scrollZoom"]});a.addChild(new e({})),a.addChild(new o({})),new r(a).init(),window.gpMapStore.map=this.map=a,this.$emit("ready",a)}},async mounted(){window.gpMapStore||(window.gpMapStore={}),window.gpMapStore.popupClose=()=>{const{map:t,popup:e}=window.gpMapStore;e&&(t.removeChild(e),window.gpMapStore.popup=null)},await this.initMap()}}),w={id:"map",style:{width:"100%",height:"100%"}};function u(t,e,o,n,a,i){return m(),c("div",w,[d(t.$slots,"default")])}const M=p(l,[["render",u]]);export{M as default};
